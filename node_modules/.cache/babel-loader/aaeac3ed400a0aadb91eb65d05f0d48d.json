{"ast":null,"code":"var _jsxFileName = \"/Users/gua/Desktop/tea-shop/src/pages/VendorLogin.jsx\";\nimport { Link, NavLink, Redirect } from 'react-router-dom';\nimport React, { useState } from 'react';\nimport * as sha1 from 'sha1';\nimport { flash } from 'react-animations';\nimport Swal from 'sweetalert2';\n\nfunction VendorLogintest() {\n  const [vendorAccount, setVendorAccount] = useState('');\n  const [vendorPassword, setVendorPassword] = useState('');\n  const [loginmode, setLoginmode] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  const loginSuccess = /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/dashboard/data\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 24\n    }\n  });\n  const vendorLoginArea = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container  ls-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"d-flex justify-content-between mb-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"list-item mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link pb-2 ls_login-nav\",\n    activeClassName: \"active\",\n    exact: true,\n    to: \"/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 11\n    }\n  }, \"\\u6703\\u54E1\\u767B\\u5165\")), /*#__PURE__*/React.createElement(\"li\", {\n    className: \"nav-item mt-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    className: \"nav-link pb-2 ls_login-nav mr-5\",\n    activeClassName: \"active\",\n    exact: true,\n    to: \"/login/vendor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 11\n    }\n  }, \"\\u5EE0\\u5546\\u767B\\u5165\"))), /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, \"\\u5EE0\\u5546\\u767B\\u5165\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control ls-login-form-control\",\n    placeholder: \"\\u8ACB\\u8F38\\u5165\\u5E33\\u865F\",\n    onChange: e => setVendorAccount(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control ls-login-form-control\",\n    placeholder: \"\\u8ACB\\u8F38\\u5165\\u5BC6\\u78BC\",\n    required: true,\n    onChange: e => setVendorPassword(sha1(e.target.value)),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-around mb-3 mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-main col-5 ls_login-btn\",\n    onClick: event => handleSubmit(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-sign-in-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }), \"\\u767B\\u5165\", ' '), /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-main2 col-5 ls_login-btn\",\n    to: \"/signup/vendor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-clipboard-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }), \" \\u8A3B\\u518A\"))));\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    const userData = {\n      vendorAccount,\n      vendorPassword\n    };\n    sendRegisterDataToServer(userData, () => alert('登入成功'));\n\n    async function sendRegisterDataToServer(userData, callback) {\n      // 注意資料格式要設定，伺服器才知道是json格式\n      const request = new Request('http://localhost:3333/vendor/try-logindata', {\n        method: 'POST',\n        credentials: 'include',\n        body: JSON.stringify(userData),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      const response = await fetch(request);\n      console.log('response', response);\n      const data = await response.json();\n\n      if (data.success === true) {\n        console.log(data.message.text);\n        sessionStorage.setItem('vendorOnlyId', JSON.stringify(data.vendorid));\n        setLoginmode(true);\n      } else {\n        Swal.fire('帳號或密碼錯誤');\n        console.log(data.success);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, loginmode ? loginSuccess : vendorLoginArea);\n}\n\nexport default VendorLogintest;","map":{"version":3,"sources":["/Users/gua/Desktop/tea-shop/src/pages/VendorLogin.jsx"],"names":["Link","NavLink","Redirect","React","useState","sha1","flash","Swal","VendorLogintest","vendorAccount","setVendorAccount","vendorPassword","setVendorPassword","loginmode","setLoginmode","error","setError","errorMessages","setErrorMessages","loginSuccess","vendorLoginArea","e","target","value","event","handleSubmit","preventDefault","userData","sendRegisterDataToServer","alert","callback","request","Request","method","credentials","body","JSON","stringify","headers","Accept","response","fetch","console","log","data","json","success","message","text","sessionStorage","setItem","vendorid","fire"],"mappings":"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","sourcesContent":["import { Link, NavLink, Redirect } from 'react-router-dom'\nimport React, { useState } from 'react'\nimport * as sha1 from 'sha1'\nimport { flash } from 'react-animations'\nimport Swal from 'sweetalert2'\n\nfunction VendorLogintest() {\n  const [vendorAccount, setVendorAccount] = useState('')\n  const [vendorPassword, setVendorPassword] = useState('')\n\n  const [loginmode, setLoginmode] = useState(false)\n  const [error, setError] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n\n  const loginSuccess = <Redirect to=\"/dashboard/data\" />\n  const vendorLoginArea = (\n    <div className=\"container  ls-header\">\n      <ul className=\"d-flex justify-content-between mb-2\">\n        <li className=\"list-item mt-3\">\n          <NavLink\n            className=\"nav-link pb-2 ls_login-nav\"\n            activeClassName=\"active\"\n            exact\n            to=\"/login\"\n          >\n            會員登入\n          </NavLink>\n        </li>\n        <li className=\"nav-item mt-3\">\n          <NavLink\n            className=\"nav-link pb-2 ls_login-nav mr-5\"\n            activeClassName=\"active\"\n            exact\n            to=\"/login/vendor\"\n          >\n            廠商登入\n          </NavLink>\n        </li>\n      </ul>\n      <form>\n        <h1 className=\"login\">廠商登入</h1>\n        <div className=\"form-group \">\n          <input\n            type=\"text\"\n            className=\"form-control ls-login-form-control\"\n            placeholder=\"請輸入帳號\"\n            onChange={e => setVendorAccount(e.target.value)}\n            required\n          />\n        </div>\n        <div className=\"form-group\">\n          <input\n            type=\"password\"\n            className=\"form-control ls-login-form-control\"\n            placeholder=\"請輸入密碼\"\n            required\n            onChange={e => setVendorPassword(sha1(e.target.value))}\n            required\n          />\n        </div>\n\n        <div className=\"d-flex justify-content-around mb-3 mt-5\">\n          <button\n            type=\"submit\"\n            className=\"btn btn-main col-5 ls_login-btn\"\n            onClick={event => handleSubmit(event)}\n          >\n            <i className=\"fas fa-sign-in-alt\"></i>登入{' '}\n          </button>\n          <Link\n            className=\"btn btn-main2 col-5 ls_login-btn\"\n            to=\"/signup/vendor\"\n          >\n            <i className=\"fas fa-clipboard-list\"></i> 註冊\n          </Link>\n        </div>\n      </form>\n    </div>\n  )\n\n  const handleSubmit = event => {\n    event.preventDefault()\n    const userData = { vendorAccount, vendorPassword }\n\n    sendRegisterDataToServer(userData, () => alert('登入成功'))\n\n    async function sendRegisterDataToServer(userData, callback) {\n      // 注意資料格式要設定，伺服器才知道是json格式\n      const request = new Request(\n        'http://localhost:3333/vendor/try-logindata',\n        {\n          method: 'POST',\n          credentials: 'include',\n          body: JSON.stringify(userData),\n          headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json',\n          },\n        }\n      )\n\n      const response = await fetch(request)\n      console.log('response', response)\n      const data = await response.json()\n\n      if (data.success === true) {\n        console.log(data.message.text)\n        sessionStorage.setItem('vendorOnlyId', JSON.stringify(data.vendorid))\n        setLoginmode(true)\n      } else {\n        Swal.fire('帳號或密碼錯誤')\n        console.log(data.success)\n      }\n    }\n  }\n\n  return <>{loginmode ? loginSuccess : vendorLoginArea}</>\n}\n\nexport default VendorLogintest\n"]},"metadata":{},"sourceType":"module"}