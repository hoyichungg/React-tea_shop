{"ast":null,"code":"var _jsxFileName = \"/Users/gua/Desktop/tea-shop/src/components/backend/BackendMsg.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, Router, withRouter } from 'react-router-dom';\n\nfunction MsgList() {\n  const [alldata, setAlldata] = useState([]);\n  const [status, setStatus] = useState('1');\n\n  async function getMsgFromServer() {\n    const request = new Request('http://localhost:3333/vendor/getMsg', {\n      method: 'GET',\n      credentials: 'include',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    setAlldata(data);\n    console.log(alldata);\n  }\n\n  useEffect(() => {\n    getMsgFromServer();\n  }, []);\n\n  const updateStatus = event => {\n    const id = event.target.getAttribute('data-id');\n    event.preventDefault();\n    const fd = new FormData();\n    fd.append('status', status);\n    fd.append('id', id); // const statusUpdate = {\n    //   status,\n    // }\n\n    sendStatusToServer(fd, () => alert('更新成功'));\n\n    async function sendStatusToServer(fd, callback) {\n      const request = new Request('http://localhost:3333/vendor/updateMsg', {\n        method: 'PUT',\n        credentials: 'include',\n        body: fd\n      });\n      const response = await fetch(request);\n      const data = await response.json();\n      console.log('response', data);\n      callback();\n      return data;\n    }\n  };\n\n  const singleMsg = React.createElement(React.Fragment, null, alldata.map((value, index) => {\n    return React.createElement(\"div\", {\n      className: \"card singleMsg mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-header d-flex justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"account\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"\\u8A0A\\u606F\\u6A19\\u984C\\uFF1A\", value.title)), React.createElement(\"div\", {\n      className: \"card-body d-flex justify-content-between align-items-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"Msg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, value.content), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btn updateMsg btn-primary\",\n      onClick: event => updateStatus(event),\n      \"data-id\": value.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"\\u63A8\\u64AD\\u8A0A\\u606F\"))));\n  }));\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"\\u8A0A\\u606F\\u7BA1\\u7406\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"btn btn-primary mb-2\",\n    to: \"/dashboard/msg/add\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"\\u65B0\\u589E\\u63A8\\u64AD\\u8A0A\\u606F\")), React.createElement(\"div\", {\n    className: \"msgArea\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, singleMsg)));\n}\n\nexport default withRouter(MsgList);","map":{"version":3,"sources":["/Users/gua/Desktop/tea-shop/src/components/backend/BackendMsg.jsx"],"names":["React","useState","useEffect","Link","Router","withRouter","MsgList","alldata","setAlldata","status","setStatus","getMsgFromServer","request","Request","method","credentials","headers","Headers","Accept","response","fetch","data","json","console","log","updateStatus","event","id","target","getAttribute","preventDefault","fd","FormData","append","sendStatusToServer","alert","callback","body","singleMsg","map","value","index","title","content"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Link, Router, withRouter } from 'react-router-dom'\n\nfunction MsgList() {\n  const [alldata, setAlldata] = useState([])\n  const [status, setStatus] = useState('1')\n\n  async function getMsgFromServer() {\n    const request = new Request('http://localhost:3333/vendor/getMsg', {\n      method: 'GET',\n      credentials: 'include',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n    const response = await fetch(request)\n    const data = await response.json()\n    setAlldata(data)\n    console.log(alldata)\n  }\n\n  useEffect(() => {\n    getMsgFromServer()\n  }, [])\n\n  const updateStatus = event => {\n    const id = event.target.getAttribute('data-id')\n    event.preventDefault()\n    const fd = new FormData()\n    fd.append('status', status)\n    fd.append('id', id)\n    // const statusUpdate = {\n    //   status,\n    // }\n    sendStatusToServer(fd, () => alert('更新成功'))\n\n    async function sendStatusToServer(fd, callback) {\n      const request = new Request('http://localhost:3333/vendor/updateMsg', {\n        method: 'PUT',\n        credentials: 'include',\n        body: fd,\n      })\n\n      const response = await fetch(request)\n      const data = await response.json()\n      console.log('response', data)\n      callback()\n      return data\n    }\n  }\n\n  const singleMsg = (\n    <>\n      {alldata.map((value, index) => {\n        return (\n          <div className=\"card singleMsg mb-4\">\n            <div className=\"card-header d-flex justify-content-between\">\n              <div className=\"account\">訊息標題：{value.title}</div>\n            </div>\n            <div className=\"card-body d-flex justify-content-between align-items-center\">\n              <div className=\"Msg\">{value.content}</div>\n              <div>\n                <button\n                  className=\"btn updateMsg btn-primary\"\n                  onClick={event => updateStatus(event)}\n                  data-id={value.id}\n                >\n                  推播訊息\n                </button>\n              </div>\n            </div>\n          </div>\n        )\n      })}\n    </>\n  )\n\n  return (\n    <>\n      <div className=\"content\">\n        <h3>訊息管理</h3>\n        <hr />\n        <div className=\"d-flex justify-content-end\">\n          <Link className=\"btn btn-primary mb-2\" to=\"/dashboard/msg/add\">\n            新增推播訊息\n          </Link>\n        </div>\n        <div className=\"msgArea\">{singleMsg}</div>\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(MsgList)\n"]},"metadata":{},"sourceType":"module"}