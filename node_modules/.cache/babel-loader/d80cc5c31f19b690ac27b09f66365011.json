{"ast":null,"code":"var _jsxFileName = \"/Users/gua/Desktop/tea-shop/src/pages/Signup.jsx\";\nimport React, { useState } from 'react';\nimport { Link, NavLink, Redirect } from 'react-router-dom'; // import * as sha1 from 'sha1'\n\nexport default function Singup() {\n  const [accountNumber, setAccountNumber] = useState('');\n  const [accountEmail, setAccountEmail] = useState('');\n  const [accountPhone, setAccountPhone] = useState('');\n  const [accountPassword1, setAccountPassword1] = useState('');\n  const [accountPassword2, setAccountPassword2] = useState('');\n  const [signmode, setSignmode] = useState(false);\n  const [error, setError] = useState(false);\n  const [errorMessages, setErrorMessages] = useState([]);\n  const nextpage = /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 20\n    }\n  });\n  const signupform = /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container yz-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Singuparea\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"Singup text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 11\n    }\n  }, \"Singup\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control yz-form-control\",\n    id: \"exampleInputName\",\n    placeholder: \"\\u5E33\\u865F\",\n    name: \"accountNumber\",\n    onChange: e => setAccountNumber(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"email\",\n    className: \"form-control yz-form-control\",\n    id: \"exampleInputEmail1\",\n    placeholder: \"Email\",\n    name: \"accountEmail\",\n    onChange: e => setAccountEmail(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"phone\",\n    className: \"form-control yz-form-control\",\n    id: \"exampleInputPhone\",\n    placeholder: \"Phone\",\n    name: \"accountPhone\",\n    onChange: e => setAccountPhone(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control yz-form-control\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Password\",\n    name: \"accountPassword\",\n    onChange: e => setAccountPassword1(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    className: \"form-control yz-form-control\",\n    id: \"exampleInputPassword2\",\n    placeholder: \"Confirm Password\",\n    name: \"accountPassword2\",\n    onChange: e => setAccountPassword2(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn-singup\",\n    onClick: event => handleSubmit(event),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-sign-in-alt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, \" \\u8A3B\\u518A\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"fb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fab fa-facebook-f\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, \" Facebook\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"gmail\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"far fa-envelope\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }, \" Gmail\")))));\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    let error = false;\n    let errorMessages = [];\n\n    if (accountPassword1 !== accountPassword2) {\n      error = true;\n      errorMessages.push('兩次密碼輸入不同');\n    }\n\n    if (!accountNumber) {\n      error = true;\n      errorMessages.push('帳號沒填');\n    }\n\n    if (accountNumber.length < 8) {\n      error = true;\n      errorMessages.push('帳號至少要8個字');\n    }\n\n    if (error) {\n      setError(error);\n      setErrorMessages(errorMessages);\n      return;\n    }\n\n    const accountPassword = accountPassword1;\n    const userData = {\n      accountNumber,\n      accountEmail,\n      accountPhone,\n      accountPassword\n    };\n    console.log(userData);\n    sendRegisterDataToServer(userData, () => alert('註冊成功，請重新登入'));\n\n    async function sendRegisterDataToServer(userData, callback) {\n      // 注意資料格式要設定，伺服器才知道是json格式\n      const request = new Request('http://127.0.0.1:3333/member/signup', {\n        method: 'POST',\n        body: JSON.stringify(userData),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      });\n      const response = await fetch(request);\n      console.log('response', response);\n      const data = await response.json();\n      console.log(data);\n      callback();\n      return data;\n    }\n\n    setSignmode(true);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, error ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }, errorMessages.map((v, i) => /*#__PURE__*/React.createElement(\"p\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }, v)))) : '', signmode ? nextpage : signupform);\n}","map":{"version":3,"sources":["/Users/gua/Desktop/tea-shop/src/pages/Signup.jsx"],"names":["React","useState","Link","NavLink","Redirect","Singup","accountNumber","setAccountNumber","accountEmail","setAccountEmail","accountPhone","setAccountPhone","accountPassword1","setAccountPassword1","accountPassword2","setAccountPassword2","signmode","setSignmode","error","setError","errorMessages","setErrorMessages","nextpage","signupform","e","target","value","event","handleSubmit","preventDefault","push","length","accountPassword","userData","console","log","sendRegisterDataToServer","alert","callback","request","Request","method","body","JSON","stringify","headers","Accept","response","fetch","data","json","map","v","i"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Link, NavLink, Redirect } from 'react-router-dom'\n// import * as sha1 from 'sha1'\n\nexport default function Singup() {\n  const [accountNumber, setAccountNumber] = useState('')\n  const [accountEmail, setAccountEmail] = useState('')\n  const [accountPhone, setAccountPhone] = useState('')\n  const [accountPassword1, setAccountPassword1] = useState('')\n  const [accountPassword2, setAccountPassword2] = useState('')\n\n  const [signmode, setSignmode] = useState(false)\n  const [error, setError] = useState(false)\n  const [errorMessages, setErrorMessages] = useState([])\n\n  const nextpage = <Redirect to=\"/signup\" />\n  const signupform = (\n    <div className=\"container yz-header\">\n      <div className=\"Singuparea\">\n        <form>\n          <h1 className=\"Singup text-center\">Singup</h1>\n          <div className=\"form-group\">\n            <input\n              type=\"text\"\n              className=\"form-control yz-form-control\"\n              id=\"exampleInputName\"\n              placeholder=\"帳號\"\n              name=\"accountNumber\"\n              onChange={e => setAccountNumber(e.target.value)}\n            />\n            <input\n              type=\"email\"\n              className=\"form-control yz-form-control\"\n              id=\"exampleInputEmail1\"\n              placeholder=\"Email\"\n              name=\"accountEmail\"\n              onChange={e => setAccountEmail(e.target.value)}\n            />\n            <input\n              type=\"phone\"\n              className=\"form-control yz-form-control\"\n              id=\"exampleInputPhone\"\n              placeholder=\"Phone\"\n              name=\"accountPhone\"\n              onChange={e => setAccountPhone(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              className=\"form-control yz-form-control\"\n              id=\"exampleInputPassword1\"\n              placeholder=\"Password\"\n              name=\"accountPassword\"\n              onChange={e => setAccountPassword1(e.target.value)}\n            />\n            <input\n              type=\"password\"\n              className=\"form-control yz-form-control\"\n              id=\"exampleInputPassword2\"\n              placeholder=\"Confirm Password\"\n              name=\"accountPassword2\"\n              onChange={e => setAccountPassword2(e.target.value)}\n            />\n          </div>\n          <button\n            type=\"submit\"\n            className=\"btn-singup\"\n            onClick={event => handleSubmit(event)}\n          >\n            <i className=\"fas fa-sign-in-alt\"> 註冊</i>\n          </button>\n          <button type=\"submit\" className=\"fb\">\n            <i className=\"fab fa-facebook-f\"> Facebook</i>\n          </button>\n          <button type=\"submit\" className=\"gmail\">\n            <i className=\"far fa-envelope\"> Gmail</i>\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n  const handleSubmit = event => {\n    event.preventDefault()\n\n    let error = false\n    let errorMessages = []\n    if (accountPassword1 !== accountPassword2) {\n      error = true\n      errorMessages.push('兩次密碼輸入不同')\n    }\n\n    if (!accountNumber) {\n      error = true\n      errorMessages.push('帳號沒填')\n    }\n\n    if (accountNumber.length < 8) {\n      error = true\n      errorMessages.push('帳號至少要8個字')\n    }\n\n    if (error) {\n      setError(error)\n      setErrorMessages(errorMessages)\n      return\n    }\n    const accountPassword = accountPassword1\n    const userData = {\n      accountNumber,\n      accountEmail,\n      accountPhone,\n      accountPassword,\n    }\n    console.log(userData)\n\n    sendRegisterDataToServer(userData, () => alert('註冊成功，請重新登入'))\n\n    async function sendRegisterDataToServer(userData, callback) {\n      // 注意資料格式要設定，伺服器才知道是json格式\n      const request = new Request('http://127.0.0.1:3333/member/signup', {\n        method: 'POST',\n        body: JSON.stringify(userData),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      })\n\n      const response = await fetch(request)\n      console.log('response', response)\n      const data = await response.json()\n      console.log(data)\n      callback()\n      return data\n    }\n    setSignmode(true)\n  }\n\n  return (\n    <>\n      {error ? (\n        <>\n          <div className=\"alert alert-danger\" role=\"alert\">\n            {errorMessages.map((v, i) => (\n              <p key={i}>{v}</p>\n            ))}\n          </div>\n        </>\n      ) : (\n        ''\n      )}\n      {signmode ? nextpage : signupform}\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}