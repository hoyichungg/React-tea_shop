{"ast":null,"code":"var _jsxFileName = \"/Users/gua/Desktop/tea-shop/src/components/backend/BackendOrderDetail.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Link, withRouter } from 'react-router-dom'; // const localId = sessionStorage.getItem('vendorOnlyId')\n\nfunction BackendOrder(props) {\n  const [orderDataDetail, setOrderDataDetail] = useState([]);\n  const [orderStatus, setOrderStatus] = useState(false);\n  const [ordeTrackCode, setOrdeTrackCode] = useState('');\n  const getorderid = Number(props.match.params.orderid);\n  console.log('getorderid', getorderid); //取得訂單列表\n\n  async function getOrderFromServer() {\n    const request = new Request('http://localhost:3333/vendor/getvendororder/' + getorderid, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json'\n      })\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log('data', data);\n    setOrderDataDetail(data); // console.log(orderData)\n  }\n\n  useEffect(() => {\n    getOrderFromServer();\n  }, []);\n\n  const sumfunc = items => {\n    let totalPrice = 0;\n\n    for (let i = 0; i < items.length; i++) {\n      totalPrice += items[i].productAmount * items[i].productPrice;\n    }\n\n    return totalPrice;\n  };\n\n  const changeProductStatus = (trackCode, orderId) => {\n    setOrderStatus(true);\n    setOrdeTrackCode(trackCode);\n    updateOrderStatus(orderId);\n  };\n\n  const updateOrderStatus = async orderId => {\n    let updateData = {\n      id: orderId,\n      data: {\n        productState: '02',\n        trackingCode: ordeTrackCode\n      }\n    };\n    const request = new Request('http://localhost:3333/order/updateOrder', {\n      method: 'PUT',\n      body: JSON.stringify(updateData),\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    });\n    const response = await fetch(request);\n    const data = await response.json();\n    console.log(data);\n  };\n\n  const backNumber = React.createElement(React.Fragment, null, \" \", React.createElement(\"form\", {\n    className: \"col-6 mb-3\",\n    action: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"form-control mb-2\",\n    type: \"text\",\n    onChange: e => setOrdeTrackCode(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    onClick: event => {\n      changeProductStatus(ordeTrackCode, getorderid);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"\\u56DE\\u5831\\u8FFD\\u8E64\\u78BC\")));\n  const backover = React.createElement(\"div\", {\n    className: \"card-header d-flex justify-content-between mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"order-status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, \"\\u904B\\u9001\\u4E2D\"));\n  const productli = React.createElement(React.Fragment, null, orderDataDetail.map((value, index) => {\n    return React.createElement(\"div\", {\n      className: \"card-body d-flex justify-content-between ls_productli row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"ls_count col-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, index + 1, \"\\u3001\"), React.createElement(\"div\", {\n      className: \"ls_order-product-single col-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, value.productName), React.createElement(\"div\", {\n      className: \"ls_order-price col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"NTD \", value.productPrice), React.createElement(\"div\", {\n      className: \"ls_order-count col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, value.productAmount), React.createElement(\"div\", {\n      className: \"ls_order-total col-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, value.productPrice * value.productAmount));\n  }), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"card-body d-flex justify-content-end text-center ls_p12-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"w180px col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, \"\\u8A02\\u55AE\\u7E3D\\u984D\"), React.createElement(\"div\", {\n    className: \"col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, sumfunc(orderDataDetail))), React.createElement(\"div\", {\n    className: \"card-body d-flex justify-content-end text-center ls_p12-0\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"w180px col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"\\u904B\\u8CBB\"), React.createElement(\"div\", {\n    className: \"col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, \"60\")), React.createElement(\"div\", {\n    className: \"card-header d-flex justify-content-end ls_bk-color text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"w180px col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"\\u8CB7\\u5BB6\\u61C9\\u4ED8\\u7E3D\\u984D\"), React.createElement(\"div\", {\n    className: \"font-weight-bold col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, sumfunc(orderDataDetail) + 60)));\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"content\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \"\\u8A02\\u55AE\\u7BA1\\u7406\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"order-area\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"d-flex justify-content-end\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"btn btn-primary mb-2\",\n    to: \"/dashboard/order/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"\\u56DE\\u4E0A\\u9801\")), orderStatus ? backover : backNumber, React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"col-6 mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, \"\\u8A02\\u55AE\\u7DE8\\u865F\\uFF1A\"), React.createElement(\"li\", {\n    className: \"list-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }))), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"col-6 mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, \"\\u8CFC\\u8CB7\\u8005\\u8CC7\\u8A0A\\uFF1A\"), React.createElement(\"li\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, \"\\u59D3\\u540D\\uFF1A\\u738B\\u5C0F\\u660E\"), React.createElement(\"li\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"\\u96FB\\u8A71\\uFF1A0900111222\"), React.createElement(\"li\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, \"\\u5730\\u5740\\uFF1A\\u53F0\\u5317\\u5E02\\u5927\\u5B89\\u5340\\u5FA9\\u8208\\u5357\\u8DEF1\\u865F\"))), React.createElement(\"div\", {\n    className: \"payInfo\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, \"\\u4ED8\\u6B3E\\u8CC7\\u8A0A\")), React.createElement(\"div\", {\n    className: \"card mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"card-header d-flex justify-content-between ls_bk-color \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"count col-1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"\\u7DE8\\u865F\"), React.createElement(\"div\", {\n    className: \"order-product-single col-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, \"\\u5546\\u54C1\"), React.createElement(\"div\", {\n    className: \"order-price col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"\\u55AE\\u50F9\"), React.createElement(\"div\", {\n    className: \"order-count col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, \"\\u6578\\u91CF\"), React.createElement(\"div\", {\n    className: \"order-total col-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, \"\\u5C0F\\u8A08\")), productli))));\n}\n\nexport default withRouter(BackendOrder);","map":{"version":3,"sources":["/Users/gua/Desktop/tea-shop/src/components/backend/BackendOrderDetail.jsx"],"names":["React","useEffect","useState","Link","withRouter","BackendOrder","props","orderDataDetail","setOrderDataDetail","orderStatus","setOrderStatus","ordeTrackCode","setOrdeTrackCode","getorderid","Number","match","params","orderid","console","log","getOrderFromServer","request","Request","method","headers","Headers","Accept","response","fetch","data","json","sumfunc","items","totalPrice","i","length","productAmount","productPrice","changeProductStatus","trackCode","orderId","updateOrderStatus","updateData","id","productState","trackingCode","body","JSON","stringify","backNumber","e","target","value","event","backover","productli","map","index","productName"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, withRouter } from 'react-router-dom'\n\n// const localId = sessionStorage.getItem('vendorOnlyId')\n\n\n\n\nfunction BackendOrder(props) {\n  const [orderDataDetail, setOrderDataDetail] = useState([])\n  const [orderStatus, setOrderStatus] = useState(false)\n  const [ordeTrackCode, setOrdeTrackCode] = useState('')\n  const getorderid = Number(props.match.params.orderid)\n  console.log('getorderid', getorderid)\n\n\n  //取得訂單列表\n  async function getOrderFromServer() {\n    const request = new Request('http://localhost:3333/vendor/getvendororder/' + getorderid, {\n      method: 'GET',\n      headers: new Headers({\n        Accept: 'application/json',\n        'Content-Type': 'appliaction/json',\n      }),\n    })\n\n    const response = await fetch(request)\n    const data = await response.json()\n    console.log('data', data);\n    setOrderDataDetail(data)\n\n    // console.log(orderData)\n\n  }\n\n  useEffect(() => {\n    getOrderFromServer()\n  }, [])\n\n  const sumfunc = items => {\n    let totalPrice = 0\n    for (let i = 0; i < items.length; i++) {\n      totalPrice += items[i].productAmount * items[i].productPrice\n    }\n    return totalPrice\n  }\n\n  const changeProductStatus = (trackCode, orderId) => {\n    setOrderStatus(true)\n    setOrdeTrackCode(trackCode)\n    updateOrderStatus(orderId)\n\n  }\n\n  const updateOrderStatus = async (orderId) => {\n    let updateData = {\n      id: orderId,\n      data: {\n        productState: '02',\n        trackingCode: ordeTrackCode\n      }\n    }\n    const request = new Request(\n      'http://localhost:3333/order/updateOrder',\n      {\n        method: 'PUT',\n        body: JSON.stringify(updateData),\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json',\n        },\n      }\n    )\n    const response = await fetch(request)\n    const data = await response.json()\n    console.log(data)\n  }\n\n  const backNumber = (<> <form className=\"col-6 mb-3\" action=\"\">\n    <input className=\"form-control mb-2\" type=\"text\" onChange={e => setOrdeTrackCode(e.target.value)} />\n    <button type=\"button\" className=\"btn btn-primary\" onClick={event => { changeProductStatus(ordeTrackCode, getorderid) }}>回報追蹤碼</button>\n  </form></>)\n\n  const backover = (<div className=\"card-header d-flex justify-content-between mb-4\">\n    <div className=\"order-status\">運送中</div>\n  </div>)\n\n\n  const productli = (<>\n    {orderDataDetail.map((value, index) => {\n      return (\n        <div className=\"card-body d-flex justify-content-between ls_productli row\">\n          <div className=\"ls_count col-1\">{index + 1}、</div>\n          <div className=\"ls_order-product-single col-5\">{value.productName}</div>\n          <div className=\"ls_order-price col-2\">NTD {value.productPrice}</div>\n          <div className=\"ls_order-count col-2\">{value.productAmount}</div>\n          <div className=\"ls_order-total col-2\">{value.productPrice * value.productAmount}</div>\n        </div>\n\n      )\n    })}\n    <hr />\n\n    <div className=\"card-body d-flex justify-content-end text-center ls_p12-0\">\n      <div className=\"w180px col-2\">訂單總額</div>\n      <div className=\"col-2\">{sumfunc(orderDataDetail)}</div>\n    </div>\n\n\n    <div className=\"card-body d-flex justify-content-end text-center ls_p12-0\">\n      <div className=\"w180px col-2\">運費</div>\n      <div className=\"col-2\">60</div>\n    </div>\n\n    <div className=\"card-header d-flex justify-content-end ls_bk-color text-center\">\n      <div className=\"w180px col-2\">買家應付總額</div>\n      <div className=\"font-weight-bold col-2\">{sumfunc(orderDataDetail) + 60}</div>\n    </div>\n\n\n  </>)\n\n\n\n\n\n\n  return (\n    <>\n      <div className=\"content\">\n        <h3>訂單管理</h3>\n        <hr />\n        <div className=\"order-area\">\n          <div className=\"d-flex justify-content-end\">\n            <Link className=\"btn btn-primary mb-2\" to=\"/dashboard/order/\">回上頁</Link>\n          </div>\n          {orderStatus ? backover : backNumber}\n\n          <div className=\"\">\n            <ul className=\"col-6 mb-4\">\n              <li className=\"list-group\">訂單編號：</li>\n              <li className=\"list-group\"></li>\n            </ul>\n          </div>\n          <hr />\n\n          <div className=\"\">\n            <ul className=\"col-6 mb-4\">\n              <li className=\"\">購買者資訊：</li>\n              <li className=\"\">姓名：王小明</li>\n              <li className=\"\">電話：0900111222</li>\n              <li className=\"\">地址：台北市大安區復興南路1號</li>\n            </ul>\n          </div>\n\n\n          <div className=\"payInfo\">\n            <h5 className=\"mb-4\">付款資訊</h5>\n          </div>\n\n          <div className=\"card mb-4\">\n            <div className=\"card-header d-flex justify-content-between ls_bk-color \">\n              <div className=\"count col-1\">編號</div>\n              <div className=\"order-product-single col-5\">商品</div>\n              <div className=\"order-price col-2\">單價</div>\n              <div className=\"order-count col-2\">數量</div>\n              <div className=\"order-total col-2\">小計</div>\n            </div>\n            {/* <div className=\"card-body d-flex justify-content-between\">\n              <div className=\"account\">1、</div>\n              <div className=\"order-product-single\">蜜香綠茶</div>\n              <div className=\"order-price\">NTD 150</div>\n              <div className=\"order-count\">3</div>\n              <div className=\"order-total\">450</div>\n            </div>\n\n\n            <div className=\"card-body d-flex justify-content-between\">\n              <div className=\"account\">2、</div>\n              <div className=\"order-product-single\">台茶18號</div>\n              <div className=\"order-price\">NTD 150</div>\n              <div className=\"order-count\">3</div>\n              <div className=\"order-total\">450</div> */}\n\n            {productli}\n\n            {/* </div> */}\n\n\n\n\n\n          </div>\n\n\n        </div>\n\n      </div>\n\n    </>\n  )\n}\n\nexport default withRouter(BackendOrder)"]},"metadata":{},"sourceType":"module"}