{"ast":null,"code":"import { useState, useEffect } from 'react';\nexport default function useCart() {\n  const [cart, setCart] = useState(JSON.parse(localStorage.getItem('cart')) || []);\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }, [cart]);\n  let cartCount = 0;\n  cart.forEach(el => cartCount += el.amount);\n\n  const addCart = (product, amount) => {\n    const newProduct = { ...product,\n      amount\n    };\n    const target = cart.find(el => el.id === newProduct.id);\n    let newCart = [];\n    console.log(newProduct);\n\n    if (target) {\n      const filterCart = cart.filter(el => el.id !== newProduct.id);\n      newCart = [...filterCart, newProduct];\n    } else {\n      newCart = [...cart, newProduct];\n    }\n\n    setCart(newCart);\n  };\n\n  const deleteCart = id => {\n    const target = cart.find(el => el.id === id);\n\n    if (target) {\n      const filterCart = cart.filter(el => el.id !== id);\n      const newCart = [...filterCart];\n      setCart(newCart);\n    }\n  };\n\n  const increaseCart = id => {\n    const filterCart = cart.filter(el => el.id !== id);\n    const target = cart.find(el => el.id === id);\n\n    if (!target) {\n      return;\n    }\n\n    target.amount += 1;\n    const newCart = [...filterCart, target];\n    setCart(newCart);\n  };\n\n  const decreaseCart = id => {\n    const filterCart = cart.filter(el => el.id !== id);\n    const target = cart.find(el => el.id === id);\n\n    if (!target) {\n      return;\n    }\n\n    target.amount += 1;\n    const newCart = [...filterCart, target];\n    setCart(newCart);\n  };\n\n  return {\n    addCart,\n    deleteCart,\n    increaseCart,\n    decreaseCart,\n    cart,\n    cartCount\n  };\n}","map":{"version":3,"sources":["/Users/gua/Desktop/tea-shop/src/hooks/useCart.js"],"names":["useState","useEffect","useCart","cart","setCart","JSON","parse","localStorage","getItem","setItem","stringify","cartCount","forEach","el","amount","addCart","product","newProduct","target","find","id","newCart","console","log","filterCart","filter","deleteCart","increaseCart","decreaseCart"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\n\nexport default function useCart() {\n  const [cart, setCart] = useState(\n    JSON.parse(localStorage.getItem('cart')) || []\n  )\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart))\n  }, [cart])\n\n  let cartCount = 0\n  cart.forEach(el => (cartCount += el.amount))\n\n  const addCart = (product, amount) => {\n    const newProduct = { ...product, amount }\n    const target = cart.find(el => el.id === newProduct.id)\n    let newCart = []\n    console.log(newProduct)\n    if (target) {\n      const filterCart = cart.filter(el => el.id !== newProduct.id)\n      newCart = [...filterCart, newProduct]\n    } else {\n      newCart = [...cart, newProduct]\n    }\n    setCart(newCart)\n  }\n\n  const deleteCart = id => {\n    const target = cart.find(el => el.id === id)\n    if (target) {\n      const filterCart = cart.filter(el => el.id !== id)\n      const newCart = [...filterCart]\n      setCart(newCart)\n    }\n  }\n\n  const increaseCart = id => {\n    const filterCart = cart.filter(el => el.id !== id)\n    const target = cart.find(el => el.id === id)\n    if (!target) {\n      return\n    }\n    target.amount += 1\n    const newCart = [...filterCart, target]\n    setCart(newCart)\n  }\n\n  const decreaseCart = id => {\n    const filterCart = cart.filter(el => el.id !== id)\n    const target = cart.find(el => el.id === id)\n    if (!target) {\n      return\n    }\n    target.amount += 1\n    const newCart = [...filterCart, target]\n    setCart(newCart)\n  }\n\n  return { addCart, deleteCart, increaseCart, decreaseCart, cart, cartCount }\n}\n"]},"metadata":{},"sourceType":"module"}